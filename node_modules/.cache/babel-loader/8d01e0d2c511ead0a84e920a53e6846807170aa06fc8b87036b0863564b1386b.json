{"ast":null,"code":"var __runInitializers = this && this.__runInitializers || function (thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n    value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\nvar __esDecorate = this && this.__esDecorate || function (ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) {\n    if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\");\n    return f;\n  }\n  var kind = contextIn.kind,\n    key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _,\n    done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n    var context = {};\n    for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n    for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n    context.addInitializer = function (f) {\n      if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\");\n      extraInitializers.push(accept(f || null));\n    };\n    var result = (0, decorators[i])(kind === \"accessor\" ? {\n      get: descriptor.get,\n      set: descriptor.set\n    } : descriptor[key], context);\n    if (kind === \"accessor\") {\n      if (result === void 0) continue;\n      if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n      if (_ = accept(result.get)) descriptor.get = _;\n      if (_ = accept(result.set)) descriptor.set = _;\n      if (_ = accept(result.init)) initializers.unshift(_);\n    } else if (_ = accept(result)) {\n      if (kind === \"field\") initializers.unshift(_);else descriptor[key] = _;\n    }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\nvar __setFunctionName = this && this.__setFunctionName || function (f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", {\n    configurable: true,\n    value: prefix ? \"\".concat(prefix, \" \", name) : name\n  });\n};\nimport { CDPSessionEvent } from '../api/CDPSession.js';\nimport { debugError } from '../common/util.js';\nimport { assert } from '../util/assert.js';\nimport { invokeAtMostOnceForArguments } from '../util/decorators.js';\nimport { isErrorLike } from '../util/ErrorLike.js';\n/**\n * @internal\n */\nexport class EmulatedState {\n  #state;\n  #clientProvider;\n  #updater;\n  constructor(initialState, clientProvider, updater) {\n    this.#state = initialState;\n    this.#clientProvider = clientProvider;\n    this.#updater = updater;\n    this.#clientProvider.registerState(this);\n  }\n  async setState(state) {\n    this.#state = state;\n    await this.sync();\n  }\n  get state() {\n    return this.#state;\n  }\n  async sync() {\n    await Promise.all(this.#clientProvider.clients().map(client => {\n      return this.#updater(client, this.#state);\n    }));\n  }\n}\n/**\n * @internal\n */\nlet EmulationManager = (() => {\n  let _instanceExtraInitializers = [];\n  let _private_applyViewport_decorators;\n  let _private_applyViewport_descriptor;\n  let _private_emulateIdleState_decorators;\n  let _private_emulateIdleState_descriptor;\n  let _private_emulateTimezone_decorators;\n  let _private_emulateTimezone_descriptor;\n  let _private_emulateVisionDeficiency_decorators;\n  let _private_emulateVisionDeficiency_descriptor;\n  let _private_emulateCpuThrottling_decorators;\n  let _private_emulateCpuThrottling_descriptor;\n  let _private_emulateMediaFeatures_decorators;\n  let _private_emulateMediaFeatures_descriptor;\n  let _private_emulateMediaType_decorators;\n  let _private_emulateMediaType_descriptor;\n  let _private_setGeolocation_decorators;\n  let _private_setGeolocation_descriptor;\n  let _private_setDefaultBackgroundColor_decorators;\n  let _private_setDefaultBackgroundColor_descriptor;\n  let _private_setJavaScriptEnabled_decorators;\n  let _private_setJavaScriptEnabled_descriptor;\n  return class EmulationManager {\n    static {\n      const _metadata = typeof Symbol === \"function\" && Symbol.metadata ? Object.create(null) : void 0;\n      _private_applyViewport_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateIdleState_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateTimezone_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateVisionDeficiency_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateCpuThrottling_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateMediaFeatures_decorators = [invokeAtMostOnceForArguments];\n      _private_emulateMediaType_decorators = [invokeAtMostOnceForArguments];\n      _private_setGeolocation_decorators = [invokeAtMostOnceForArguments];\n      _private_setDefaultBackgroundColor_decorators = [invokeAtMostOnceForArguments];\n      _private_setJavaScriptEnabled_decorators = [invokeAtMostOnceForArguments];\n      __esDecorate(this, _private_applyViewport_descriptor = {\n        value: __setFunctionName(async function (client, viewportState) {\n          if (!viewportState.viewport) {\n            return;\n          }\n          const {\n            viewport\n          } = viewportState;\n          const mobile = viewport.isMobile || false;\n          const width = viewport.width;\n          const height = viewport.height;\n          const deviceScaleFactor = viewport.deviceScaleFactor ?? 1;\n          const screenOrientation = viewport.isLandscape ? {\n            angle: 90,\n            type: 'landscapePrimary'\n          } : {\n            angle: 0,\n            type: 'portraitPrimary'\n          };\n          const hasTouch = viewport.hasTouch || false;\n          await Promise.all([client.send('Emulation.setDeviceMetricsOverride', {\n            mobile,\n            width,\n            height,\n            deviceScaleFactor,\n            screenOrientation\n          }), client.send('Emulation.setTouchEmulationEnabled', {\n            enabled: hasTouch\n          })]);\n        }, \"#applyViewport\")\n      }, _private_applyViewport_decorators, {\n        kind: \"method\",\n        name: \"#applyViewport\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #applyViewport in obj,\n          get: obj => obj.#applyViewport\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateIdleState_descriptor = {\n        value: __setFunctionName(async function (client, idleStateState) {\n          if (!idleStateState.active) {\n            return;\n          }\n          if (idleStateState.overrides) {\n            await client.send('Emulation.setIdleOverride', {\n              isUserActive: idleStateState.overrides.isUserActive,\n              isScreenUnlocked: idleStateState.overrides.isScreenUnlocked\n            });\n          } else {\n            await client.send('Emulation.clearIdleOverride');\n          }\n        }, \"#emulateIdleState\")\n      }, _private_emulateIdleState_decorators, {\n        kind: \"method\",\n        name: \"#emulateIdleState\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateIdleState in obj,\n          get: obj => obj.#emulateIdleState\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateTimezone_descriptor = {\n        value: __setFunctionName(async function (client, timezoneState) {\n          if (!timezoneState.active) {\n            return;\n          }\n          try {\n            await client.send('Emulation.setTimezoneOverride', {\n              timezoneId: timezoneState.timezoneId || ''\n            });\n          } catch (error) {\n            if (isErrorLike(error) && error.message.includes('Invalid timezone')) {\n              throw new Error(`Invalid timezone ID: ${timezoneState.timezoneId}`);\n            }\n            throw error;\n          }\n        }, \"#emulateTimezone\")\n      }, _private_emulateTimezone_decorators, {\n        kind: \"method\",\n        name: \"#emulateTimezone\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateTimezone in obj,\n          get: obj => obj.#emulateTimezone\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateVisionDeficiency_descriptor = {\n        value: __setFunctionName(async function (client, visionDeficiency) {\n          if (!visionDeficiency.active) {\n            return;\n          }\n          await client.send('Emulation.setEmulatedVisionDeficiency', {\n            type: visionDeficiency.visionDeficiency || 'none'\n          });\n        }, \"#emulateVisionDeficiency\")\n      }, _private_emulateVisionDeficiency_decorators, {\n        kind: \"method\",\n        name: \"#emulateVisionDeficiency\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateVisionDeficiency in obj,\n          get: obj => obj.#emulateVisionDeficiency\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateCpuThrottling_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setCPUThrottlingRate', {\n            rate: state.factor ?? 1\n          });\n        }, \"#emulateCpuThrottling\")\n      }, _private_emulateCpuThrottling_decorators, {\n        kind: \"method\",\n        name: \"#emulateCpuThrottling\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateCpuThrottling in obj,\n          get: obj => obj.#emulateCpuThrottling\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateMediaFeatures_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setEmulatedMedia', {\n            features: state.mediaFeatures\n          });\n        }, \"#emulateMediaFeatures\")\n      }, _private_emulateMediaFeatures_decorators, {\n        kind: \"method\",\n        name: \"#emulateMediaFeatures\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateMediaFeatures in obj,\n          get: obj => obj.#emulateMediaFeatures\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_emulateMediaType_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setEmulatedMedia', {\n            media: state.type || ''\n          });\n        }, \"#emulateMediaType\")\n      }, _private_emulateMediaType_decorators, {\n        kind: \"method\",\n        name: \"#emulateMediaType\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #emulateMediaType in obj,\n          get: obj => obj.#emulateMediaType\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_setGeolocation_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setGeolocationOverride', state.geoLocation ? {\n            longitude: state.geoLocation.longitude,\n            latitude: state.geoLocation.latitude,\n            accuracy: state.geoLocation.accuracy\n          } : undefined);\n        }, \"#setGeolocation\")\n      }, _private_setGeolocation_decorators, {\n        kind: \"method\",\n        name: \"#setGeolocation\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #setGeolocation in obj,\n          get: obj => obj.#setGeolocation\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_setDefaultBackgroundColor_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setDefaultBackgroundColorOverride', {\n            color: state.color\n          });\n        }, \"#setDefaultBackgroundColor\")\n      }, _private_setDefaultBackgroundColor_decorators, {\n        kind: \"method\",\n        name: \"#setDefaultBackgroundColor\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #setDefaultBackgroundColor in obj,\n          get: obj => obj.#setDefaultBackgroundColor\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      __esDecorate(this, _private_setJavaScriptEnabled_descriptor = {\n        value: __setFunctionName(async function (client, state) {\n          if (!state.active) {\n            return;\n          }\n          await client.send('Emulation.setScriptExecutionDisabled', {\n            value: !state.javaScriptEnabled\n          });\n        }, \"#setJavaScriptEnabled\")\n      }, _private_setJavaScriptEnabled_decorators, {\n        kind: \"method\",\n        name: \"#setJavaScriptEnabled\",\n        static: false,\n        private: true,\n        access: {\n          has: obj => #setJavaScriptEnabled in obj,\n          get: obj => obj.#setJavaScriptEnabled\n        },\n        metadata: _metadata\n      }, null, _instanceExtraInitializers);\n      if (_metadata) Object.defineProperty(this, Symbol.metadata, {\n        enumerable: true,\n        configurable: true,\n        writable: true,\n        value: _metadata\n      });\n    }\n    #client = (__runInitializers(this, _instanceExtraInitializers), void 0);\n    #emulatingMobile = false;\n    #hasTouch = false;\n    #states = [];\n    #viewportState = new EmulatedState({\n      active: false\n    }, this, this.#applyViewport);\n    #idleOverridesState = new EmulatedState({\n      active: false\n    }, this, this.#emulateIdleState);\n    #timezoneState = new EmulatedState({\n      active: false\n    }, this, this.#emulateTimezone);\n    #visionDeficiencyState = new EmulatedState({\n      active: false\n    }, this, this.#emulateVisionDeficiency);\n    #cpuThrottlingState = new EmulatedState({\n      active: false\n    }, this, this.#emulateCpuThrottling);\n    #mediaFeaturesState = new EmulatedState({\n      active: false\n    }, this, this.#emulateMediaFeatures);\n    #mediaTypeState = new EmulatedState({\n      active: false\n    }, this, this.#emulateMediaType);\n    #geoLocationState = new EmulatedState({\n      active: false\n    }, this, this.#setGeolocation);\n    #defaultBackgroundColorState = new EmulatedState({\n      active: false\n    }, this, this.#setDefaultBackgroundColor);\n    #javascriptEnabledState = new EmulatedState({\n      javaScriptEnabled: true,\n      active: false\n    }, this, this.#setJavaScriptEnabled);\n    #secondaryClients = new Set();\n    constructor(client) {\n      this.#client = client;\n    }\n    updateClient(client) {\n      this.#client = client;\n      this.#secondaryClients.delete(client);\n    }\n    registerState(state) {\n      this.#states.push(state);\n    }\n    clients() {\n      return [this.#client, ...Array.from(this.#secondaryClients)];\n    }\n    async registerSpeculativeSession(client) {\n      this.#secondaryClients.add(client);\n      client.once(CDPSessionEvent.Disconnected, () => {\n        this.#secondaryClients.delete(client);\n      });\n      // We don't await here because we want to register all state changes before\n      // the target is unpaused.\n      void Promise.all(this.#states.map(s => {\n        return s.sync().catch(debugError);\n      }));\n    }\n    get javascriptEnabled() {\n      return this.#javascriptEnabledState.state.javaScriptEnabled;\n    }\n    async emulateViewport(viewport) {\n      await this.#viewportState.setState({\n        viewport,\n        active: true\n      });\n      const mobile = viewport.isMobile || false;\n      const hasTouch = viewport.hasTouch || false;\n      const reloadNeeded = this.#emulatingMobile !== mobile || this.#hasTouch !== hasTouch;\n      this.#emulatingMobile = mobile;\n      this.#hasTouch = hasTouch;\n      return reloadNeeded;\n    }\n    get #applyViewport() {\n      return _private_applyViewport_descriptor.value;\n    }\n    async emulateIdleState(overrides) {\n      await this.#idleOverridesState.setState({\n        active: true,\n        overrides\n      });\n    }\n    get #emulateIdleState() {\n      return _private_emulateIdleState_descriptor.value;\n    }\n    get #emulateTimezone() {\n      return _private_emulateTimezone_descriptor.value;\n    }\n    async emulateTimezone(timezoneId) {\n      await this.#timezoneState.setState({\n        timezoneId,\n        active: true\n      });\n    }\n    get #emulateVisionDeficiency() {\n      return _private_emulateVisionDeficiency_descriptor.value;\n    }\n    async emulateVisionDeficiency(type) {\n      const visionDeficiencies = new Set(['none', 'achromatopsia', 'blurredVision', 'deuteranopia', 'protanopia', 'tritanopia']);\n      assert(!type || visionDeficiencies.has(type), `Unsupported vision deficiency: ${type}`);\n      await this.#visionDeficiencyState.setState({\n        active: true,\n        visionDeficiency: type\n      });\n    }\n    get #emulateCpuThrottling() {\n      return _private_emulateCpuThrottling_descriptor.value;\n    }\n    async emulateCPUThrottling(factor) {\n      assert(factor === null || factor >= 1, 'Throttling rate should be greater or equal to 1');\n      await this.#cpuThrottlingState.setState({\n        active: true,\n        factor: factor ?? undefined\n      });\n    }\n    get #emulateMediaFeatures() {\n      return _private_emulateMediaFeatures_descriptor.value;\n    }\n    async emulateMediaFeatures(features) {\n      if (Array.isArray(features)) {\n        for (const mediaFeature of features) {\n          const name = mediaFeature.name;\n          assert(/^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(name), 'Unsupported media feature: ' + name);\n        }\n      }\n      await this.#mediaFeaturesState.setState({\n        active: true,\n        mediaFeatures: features\n      });\n    }\n    get #emulateMediaType() {\n      return _private_emulateMediaType_descriptor.value;\n    }\n    async emulateMediaType(type) {\n      assert(type === 'screen' || type === 'print' || (type ?? undefined) === undefined, 'Unsupported media type: ' + type);\n      await this.#mediaTypeState.setState({\n        type,\n        active: true\n      });\n    }\n    get #setGeolocation() {\n      return _private_setGeolocation_descriptor.value;\n    }\n    async setGeolocation(options) {\n      const {\n        longitude,\n        latitude,\n        accuracy = 0\n      } = options;\n      if (longitude < -180 || longitude > 180) {\n        throw new Error(`Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`);\n      }\n      if (latitude < -90 || latitude > 90) {\n        throw new Error(`Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`);\n      }\n      if (accuracy < 0) {\n        throw new Error(`Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`);\n      }\n      await this.#geoLocationState.setState({\n        active: true,\n        geoLocation: {\n          longitude,\n          latitude,\n          accuracy\n        }\n      });\n    }\n    get #setDefaultBackgroundColor() {\n      return _private_setDefaultBackgroundColor_descriptor.value;\n    }\n    /**\n     * Resets default white background\n     */\n    async resetDefaultBackgroundColor() {\n      await this.#defaultBackgroundColorState.setState({\n        active: true,\n        color: undefined\n      });\n    }\n    /**\n     * Hides default white background\n     */\n    async setTransparentBackgroundColor() {\n      await this.#defaultBackgroundColorState.setState({\n        active: true,\n        color: {\n          r: 0,\n          g: 0,\n          b: 0,\n          a: 0\n        }\n      });\n    }\n    get #setJavaScriptEnabled() {\n      return _private_setJavaScriptEnabled_descriptor.value;\n    }\n    async setJavaScriptEnabled(enabled) {\n      await this.#javascriptEnabledState.setState({\n        active: true,\n        javaScriptEnabled: enabled\n      });\n    }\n  };\n})();\nexport { EmulationManager };","map":{"version":3,"names":["CDPSessionEvent","debugError","assert","invokeAtMostOnceForArguments","isErrorLike","EmulatedState","state","clientProvider","updater","constructor","initialState","registerState","setState","sync","Promise","all","clients","map","client","EmulationManager","__esDecorate","_private_applyViewport_descriptor","value","__setFunctionName","viewportState","viewport","mobile","isMobile","width","height","deviceScaleFactor","screenOrientation","isLandscape","angle","type","hasTouch","send","enabled","_private_applyViewport_decorators","kind","name","static","private","access","has","obj","applyViewport","get","metadata","_metadata","_instanceExtraInitializers","_private_emulateIdleState_descriptor","idleStateState","active","overrides","isUserActive","isScreenUnlocked","_private_emulateIdleState_decorators","emulateIdleState","_private_emulateTimezone_descriptor","timezoneState","timezoneId","error","message","includes","Error","_private_emulateTimezone_decorators","emulateTimezone","_private_emulateVisionDeficiency_descriptor","visionDeficiency","_private_emulateVisionDeficiency_decorators","emulateVisionDeficiency","_private_emulateCpuThrottling_descriptor","rate","factor","_private_emulateCpuThrottling_decorators","emulateCpuThrottling","_private_emulateMediaFeatures_descriptor","features","mediaFeatures","_private_emulateMediaFeatures_decorators","emulateMediaFeatures","_private_emulateMediaType_descriptor","media","_private_emulateMediaType_decorators","emulateMediaType","_private_setGeolocation_descriptor","geoLocation","longitude","latitude","accuracy","undefined","_private_setGeolocation_decorators","setGeolocation","_private_setDefaultBackgroundColor_descriptor","color","_private_setDefaultBackgroundColor_decorators","setDefaultBackgroundColor","_private_setJavaScriptEnabled_descriptor","javaScriptEnabled","_private_setJavaScriptEnabled_decorators","setJavaScriptEnabled","__runInitializers","emulatingMobile","states","idleOverridesState","visionDeficiencyState","cpuThrottlingState","mediaFeaturesState","mediaTypeState","geoLocationState","defaultBackgroundColorState","javascriptEnabledState","secondaryClients","Set","updateClient","delete","push","Array","from","registerSpeculativeSession","add","once","Disconnected","s","catch","javascriptEnabled","emulateViewport","reloadNeeded","#applyViewport","#emulateIdleState","#emulateTimezone","#emulateVisionDeficiency","visionDeficiencies","#emulateCpuThrottling","emulateCPUThrottling","#emulateMediaFeatures","isArray","mediaFeature","test","#emulateMediaType","#setGeolocation","options","#setDefaultBackgroundColor","resetDefaultBackgroundColor","setTransparentBackgroundColor","r","g","b","a","#setJavaScriptEnabled"],"sources":["/Users/jeffreyvanoosterwijk/Desktop/repos/resume-generator/node_modules/puppeteer-core/src/cdp/EmulationManager.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2017 Google Inc.\n * SPDX-License-Identifier: Apache-2.0\n */\nimport type {Protocol} from 'devtools-protocol';\n\nimport {type CDPSession, CDPSessionEvent} from '../api/CDPSession.js';\nimport type {GeolocationOptions, MediaFeature} from '../api/Page.js';\nimport {debugError} from '../common/util.js';\nimport type {Viewport} from '../common/Viewport.js';\nimport {assert} from '../util/assert.js';\nimport {invokeAtMostOnceForArguments} from '../util/decorators.js';\nimport {isErrorLike} from '../util/ErrorLike.js';\n\ninterface ViewportState {\n  viewport?: Viewport;\n  active: boolean;\n}\n\ninterface IdleOverridesState {\n  overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  };\n  active: boolean;\n}\n\ninterface TimezoneState {\n  timezoneId?: string;\n  active: boolean;\n}\n\ninterface VisionDeficiencyState {\n  visionDeficiency?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type'];\n  active: boolean;\n}\n\ninterface CpuThrottlingState {\n  factor?: number;\n  active: boolean;\n}\n\ninterface MediaFeaturesState {\n  mediaFeatures?: MediaFeature[];\n  active: boolean;\n}\n\ninterface MediaTypeState {\n  type?: string;\n  active: boolean;\n}\n\ninterface GeoLocationState {\n  geoLocation?: GeolocationOptions;\n  active: boolean;\n}\n\ninterface DefaultBackgroundColorState {\n  color?: Protocol.DOM.RGBA;\n  active: boolean;\n}\n\ninterface JavascriptEnabledState {\n  javaScriptEnabled: boolean;\n  active: boolean;\n}\n\n/**\n * @internal\n */\nexport interface ClientProvider {\n  clients(): CDPSession[];\n  registerState(state: EmulatedState<any>): void;\n}\n\n/**\n * @internal\n */\nexport class EmulatedState<T extends {active: boolean}> {\n  #state: T;\n  #clientProvider: ClientProvider;\n  #updater: (client: CDPSession, state: T) => Promise<void>;\n\n  constructor(\n    initialState: T,\n    clientProvider: ClientProvider,\n    updater: (client: CDPSession, state: T) => Promise<void>\n  ) {\n    this.#state = initialState;\n    this.#clientProvider = clientProvider;\n    this.#updater = updater;\n    this.#clientProvider.registerState(this);\n  }\n\n  async setState(state: T): Promise<void> {\n    this.#state = state;\n    await this.sync();\n  }\n\n  get state(): T {\n    return this.#state;\n  }\n\n  async sync(): Promise<void> {\n    await Promise.all(\n      this.#clientProvider.clients().map(client => {\n        return this.#updater(client, this.#state);\n      })\n    );\n  }\n}\n\n/**\n * @internal\n */\nexport class EmulationManager {\n  #client: CDPSession;\n\n  #emulatingMobile = false;\n  #hasTouch = false;\n\n  #states: Array<EmulatedState<any>> = [];\n\n  #viewportState = new EmulatedState<ViewportState>(\n    {\n      active: false,\n    },\n    this,\n    this.#applyViewport\n  );\n  #idleOverridesState = new EmulatedState<IdleOverridesState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateIdleState\n  );\n  #timezoneState = new EmulatedState<TimezoneState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateTimezone\n  );\n  #visionDeficiencyState = new EmulatedState<VisionDeficiencyState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateVisionDeficiency\n  );\n  #cpuThrottlingState = new EmulatedState<CpuThrottlingState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateCpuThrottling\n  );\n  #mediaFeaturesState = new EmulatedState<MediaFeaturesState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateMediaFeatures\n  );\n  #mediaTypeState = new EmulatedState<MediaTypeState>(\n    {\n      active: false,\n    },\n    this,\n    this.#emulateMediaType\n  );\n  #geoLocationState = new EmulatedState<GeoLocationState>(\n    {\n      active: false,\n    },\n    this,\n    this.#setGeolocation\n  );\n  #defaultBackgroundColorState = new EmulatedState<DefaultBackgroundColorState>(\n    {\n      active: false,\n    },\n    this,\n    this.#setDefaultBackgroundColor\n  );\n  #javascriptEnabledState = new EmulatedState<JavascriptEnabledState>(\n    {\n      javaScriptEnabled: true,\n      active: false,\n    },\n    this,\n    this.#setJavaScriptEnabled\n  );\n\n  #secondaryClients = new Set<CDPSession>();\n\n  constructor(client: CDPSession) {\n    this.#client = client;\n  }\n\n  updateClient(client: CDPSession): void {\n    this.#client = client;\n    this.#secondaryClients.delete(client);\n  }\n\n  registerState(state: EmulatedState<any>): void {\n    this.#states.push(state);\n  }\n\n  clients(): CDPSession[] {\n    return [this.#client, ...Array.from(this.#secondaryClients)];\n  }\n\n  async registerSpeculativeSession(client: CDPSession): Promise<void> {\n    this.#secondaryClients.add(client);\n    client.once(CDPSessionEvent.Disconnected, () => {\n      this.#secondaryClients.delete(client);\n    });\n    // We don't await here because we want to register all state changes before\n    // the target is unpaused.\n    void Promise.all(\n      this.#states.map(s => {\n        return s.sync().catch(debugError);\n      })\n    );\n  }\n\n  get javascriptEnabled(): boolean {\n    return this.#javascriptEnabledState.state.javaScriptEnabled;\n  }\n\n  async emulateViewport(viewport: Viewport): Promise<boolean> {\n    await this.#viewportState.setState({\n      viewport,\n      active: true,\n    });\n\n    const mobile = viewport.isMobile || false;\n    const hasTouch = viewport.hasTouch || false;\n    const reloadNeeded =\n      this.#emulatingMobile !== mobile || this.#hasTouch !== hasTouch;\n    this.#emulatingMobile = mobile;\n    this.#hasTouch = hasTouch;\n\n    return reloadNeeded;\n  }\n\n  @invokeAtMostOnceForArguments\n  async #applyViewport(\n    client: CDPSession,\n    viewportState: ViewportState\n  ): Promise<void> {\n    if (!viewportState.viewport) {\n      return;\n    }\n    const {viewport} = viewportState;\n    const mobile = viewport.isMobile || false;\n    const width = viewport.width;\n    const height = viewport.height;\n    const deviceScaleFactor = viewport.deviceScaleFactor ?? 1;\n    const screenOrientation: Protocol.Emulation.ScreenOrientation =\n      viewport.isLandscape\n        ? {angle: 90, type: 'landscapePrimary'}\n        : {angle: 0, type: 'portraitPrimary'};\n    const hasTouch = viewport.hasTouch || false;\n\n    await Promise.all([\n      client.send('Emulation.setDeviceMetricsOverride', {\n        mobile,\n        width,\n        height,\n        deviceScaleFactor,\n        screenOrientation,\n      }),\n      client.send('Emulation.setTouchEmulationEnabled', {\n        enabled: hasTouch,\n      }),\n    ]);\n  }\n\n  async emulateIdleState(overrides?: {\n    isUserActive: boolean;\n    isScreenUnlocked: boolean;\n  }): Promise<void> {\n    await this.#idleOverridesState.setState({\n      active: true,\n      overrides,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateIdleState(\n    client: CDPSession,\n    idleStateState: IdleOverridesState\n  ): Promise<void> {\n    if (!idleStateState.active) {\n      return;\n    }\n    if (idleStateState.overrides) {\n      await client.send('Emulation.setIdleOverride', {\n        isUserActive: idleStateState.overrides.isUserActive,\n        isScreenUnlocked: idleStateState.overrides.isScreenUnlocked,\n      });\n    } else {\n      await client.send('Emulation.clearIdleOverride');\n    }\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateTimezone(\n    client: CDPSession,\n    timezoneState: TimezoneState\n  ): Promise<void> {\n    if (!timezoneState.active) {\n      return;\n    }\n    try {\n      await client.send('Emulation.setTimezoneOverride', {\n        timezoneId: timezoneState.timezoneId || '',\n      });\n    } catch (error) {\n      if (isErrorLike(error) && error.message.includes('Invalid timezone')) {\n        throw new Error(`Invalid timezone ID: ${timezoneState.timezoneId}`);\n      }\n      throw error;\n    }\n  }\n\n  async emulateTimezone(timezoneId?: string): Promise<void> {\n    await this.#timezoneState.setState({\n      timezoneId,\n      active: true,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateVisionDeficiency(\n    client: CDPSession,\n    visionDeficiency: VisionDeficiencyState\n  ): Promise<void> {\n    if (!visionDeficiency.active) {\n      return;\n    }\n    await client.send('Emulation.setEmulatedVisionDeficiency', {\n      type: visionDeficiency.visionDeficiency || 'none',\n    });\n  }\n\n  async emulateVisionDeficiency(\n    type?: Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n  ): Promise<void> {\n    const visionDeficiencies = new Set<\n      Protocol.Emulation.SetEmulatedVisionDeficiencyRequest['type']\n    >([\n      'none',\n      'achromatopsia',\n      'blurredVision',\n      'deuteranopia',\n      'protanopia',\n      'tritanopia',\n    ]);\n    assert(\n      !type || visionDeficiencies.has(type),\n      `Unsupported vision deficiency: ${type}`\n    );\n    await this.#visionDeficiencyState.setState({\n      active: true,\n      visionDeficiency: type,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateCpuThrottling(\n    client: CDPSession,\n    state: CpuThrottlingState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setCPUThrottlingRate', {\n      rate: state.factor ?? 1,\n    });\n  }\n\n  async emulateCPUThrottling(factor: number | null): Promise<void> {\n    assert(\n      factor === null || factor >= 1,\n      'Throttling rate should be greater or equal to 1'\n    );\n    await this.#cpuThrottlingState.setState({\n      active: true,\n      factor: factor ?? undefined,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateMediaFeatures(\n    client: CDPSession,\n    state: MediaFeaturesState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setEmulatedMedia', {\n      features: state.mediaFeatures,\n    });\n  }\n\n  async emulateMediaFeatures(features?: MediaFeature[]): Promise<void> {\n    if (Array.isArray(features)) {\n      for (const mediaFeature of features) {\n        const name = mediaFeature.name;\n        assert(\n          /^(?:prefers-(?:color-scheme|reduced-motion)|color-gamut)$/.test(\n            name\n          ),\n          'Unsupported media feature: ' + name\n        );\n      }\n    }\n    await this.#mediaFeaturesState.setState({\n      active: true,\n      mediaFeatures: features,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #emulateMediaType(\n    client: CDPSession,\n    state: MediaTypeState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setEmulatedMedia', {\n      media: state.type || '',\n    });\n  }\n\n  async emulateMediaType(type?: string): Promise<void> {\n    assert(\n      type === 'screen' ||\n        type === 'print' ||\n        (type ?? undefined) === undefined,\n      'Unsupported media type: ' + type\n    );\n    await this.#mediaTypeState.setState({\n      type,\n      active: true,\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #setGeolocation(\n    client: CDPSession,\n    state: GeoLocationState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send(\n      'Emulation.setGeolocationOverride',\n      state.geoLocation\n        ? {\n            longitude: state.geoLocation.longitude,\n            latitude: state.geoLocation.latitude,\n            accuracy: state.geoLocation.accuracy,\n          }\n        : undefined\n    );\n  }\n\n  async setGeolocation(options: GeolocationOptions): Promise<void> {\n    const {longitude, latitude, accuracy = 0} = options;\n    if (longitude < -180 || longitude > 180) {\n      throw new Error(\n        `Invalid longitude \"${longitude}\": precondition -180 <= LONGITUDE <= 180 failed.`\n      );\n    }\n    if (latitude < -90 || latitude > 90) {\n      throw new Error(\n        `Invalid latitude \"${latitude}\": precondition -90 <= LATITUDE <= 90 failed.`\n      );\n    }\n    if (accuracy < 0) {\n      throw new Error(\n        `Invalid accuracy \"${accuracy}\": precondition 0 <= ACCURACY failed.`\n      );\n    }\n    await this.#geoLocationState.setState({\n      active: true,\n      geoLocation: {\n        longitude,\n        latitude,\n        accuracy,\n      },\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #setDefaultBackgroundColor(\n    client: CDPSession,\n    state: DefaultBackgroundColorState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setDefaultBackgroundColorOverride', {\n      color: state.color,\n    });\n  }\n\n  /**\n   * Resets default white background\n   */\n  async resetDefaultBackgroundColor(): Promise<void> {\n    await this.#defaultBackgroundColorState.setState({\n      active: true,\n      color: undefined,\n    });\n  }\n\n  /**\n   * Hides default white background\n   */\n  async setTransparentBackgroundColor(): Promise<void> {\n    await this.#defaultBackgroundColorState.setState({\n      active: true,\n      color: {r: 0, g: 0, b: 0, a: 0},\n    });\n  }\n\n  @invokeAtMostOnceForArguments\n  async #setJavaScriptEnabled(\n    client: CDPSession,\n    state: JavascriptEnabledState\n  ): Promise<void> {\n    if (!state.active) {\n      return;\n    }\n    await client.send('Emulation.setScriptExecutionDisabled', {\n      value: !state.javaScriptEnabled,\n    });\n  }\n\n  async setJavaScriptEnabled(enabled: boolean): Promise<void> {\n    await this.#javascriptEnabledState.setState({\n      active: true,\n      javaScriptEnabled: enabled,\n    });\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}